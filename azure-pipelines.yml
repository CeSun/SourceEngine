pool:
  vmImage: 'windows-2019'


# useful variables:
# https://docs.microsoft.com/en-us/azure/devops/pipelines/build/variables?view=azure-devops&tabs=yaml


steps:
- task: PythonScript@0
  displayName: Generate Projects
  inputs:
    scriptSource: 'filePath'
    scriptPath: 'src/devtools/qpc/qpc.py'
    workingDirectory: 'src/'
    arguments: '-a everything -t vstudio -m hl2 hl2mp episodic -mf everything'

- script: 'pip install PyGithub'
    displayName: 'Install PyGithub'    
    
- task: PythonScript@0
  displayName: Build and Check for Issue 50
  inputs:
    scriptSource: 'filePath'
    scriptPath: 'src/auto_issue50.py'
    workingDirectory: 'src/'
    arguments: '$(git_token)'
